/*! angular-google-maps 0.0.0 2013-07-29
 *  AngularJS directives for Google Maps
 *  git: https://github.com/nlaplante/angular-google-maps.git
 */
angular.module("google-maps",[]),function(){this.module=function(a,b){var c,d;return"string"==typeof a&&(a=a.split(".")),c=this[d=a.shift()]||(this[d]={}),c.module||(c.module=this.module),a.length?c.module(a,b):b.call(c)}}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};this.module("oo",function(){var b;return b=["extended","included"],this.BaseObject=function(){function c(){}return c.extend=function(c){var d,e,f;for(d in c)e=c[d],a.call(b,d)<0&&(this[d]=e);return null!=(f=c.extended)&&f.apply(0),this},c.include=function(c){var d,e,f;for(d in c)e=c[d],a.call(b,d)<0&&(this.prototype[d]=e);return null!=(f=c.included)&&f.apply(0),this},c}()})}.call(this),function(){this.module("directives.api.utils",function(){return this.GmapUtil={createMarkerOptions:function(a,b,c,d,e){var f;return f=angular.extend({},e,{position:new google.maps.LatLng(b.latitude,b.longitude),map:a.getMap(),icon:c,visible:null!=b.latitude&&null!=b.longitude}),d||delete f.animation,f},createWindowOptions:function(a,b,c,d){return angular.extend({},d,{content:c,position:angular.isObject(a)?a.getPosition():new google.maps.LatLng(b.coords.latitude,b.coords.longitude)})}}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.module("directives.api.utils",function(){return this.Linked=function(a){function c(a,b,c,d){this.scope=a,this.element=b,this.attrs=c,this.ctrls=d}return b(c,a),c}(oo.BaseObject)})}.call(this),function(){this.module("directives.api.utils",function(){return this.Logger={logger:void 0,doLog:!1,info:function(a){return directives.api.utils.Logger.doLog?null!=directives.api.utils.Logger.logger?directives.api.utils.Logger.logger.info(a):console.info(a):void 0}}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api.models.child",function(){return this.MarkerChildModel=function(b){function d(b,c,d,e,f,g,h,i){this.watchDestroy=a(this.watchDestroy,this),this.watchIcon=a(this.watchIcon,this),this.watchCoords=a(this.watchCoords,this),this.destroy=a(this.destroy,this);var j=this;this.index=b,this.model=c,this.iconKey=d.icon,this.coordsKey=d.coords,this.myScope=d.$new(!1),this.myScope.icon="self"===this.iconKey?c:c[this.iconKey],this.myScope.coords="self"===this.coordsKey?c:c[this.coordsKey],this.gMap=e,this.opts=this.createMarkerOptions(this.gMap,this.myScope.coords,this.myScope.icon,h),this.gMarker=new google.maps.Marker(this.opts),this.doClick=i,this.$log=directives.api.utils.Logger,google.maps.event.addListener(this.gMarker,"click",function(){return j.doClick&&null!=j.myScope.click?j.myScope.click():void 0}),f(function(){return j.watchCoords(j.myScope),j.watchIcon(j.myScope),j.watchDestroy(j.myScope)})}return c(d,b),d.include(directives.api.utils.GmapUtil),d.prototype.destroy=function(){return this.myScope.$destroy()},d.prototype.watchCoords=function(a){var b=this;return a.$watch("coords",function(a,c){return a!==c?a?(b.gMarker.setMap(b.gMap.getMap()),b.gMarker.setPosition(new google.maps.LatLng(a.latitude,a.longitude)),b.gMarker.setVisible(null!=a.latitude&&null!=a.longitude)):b.gMarker.setMap(null):void 0},!0)},d.prototype.watchIcon=function(a){var b=this;return a.$watch("icon",function(a,c){return a!==c?(b.gMarker.icon=a,b.gMarker.setMap(null),b.gMarker.setMap(b.gMap.getMap()),b.gMarker.setPosition(new google.maps.LatLng(coords.latitude,coords.longitude)),b.gMarker.setVisible(coords.latitude&&null!=coords.longitude)):void 0},!0)},d.prototype.watchDestroy=function(a){var b=this;return a.$on("$destroy",function(){return b.gMarker.setMap(null),"undefined"!=typeof notifyLocalDestroy&&null!==notifyLocalDestroy?notifyLocalDestroy(b.index):void 0})},d}(oo.BaseObject)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api.models.child",function(){return this.WindowChildModel=function(b){function d(b,c,d,e,f,g,h,i){this.destroy=a(this.destroy,this),this.scope=b,this.opts=c,this.mapCtrl=e,this.markerCtrl=f,this.isIconVisibleOnClick=d,this.initialMarkerVisibility=null!=this.markerCtrl?this.markerCtrl.getVisible():!1,this.$log=directives.api.utils.Logger,this.$http=g,this.$templateCache=h,this.$compile=i,this.gWin=new google.maps.InfoWindow(c),null!=this.markerCtrl&&this.markerCtrl.setClickable(!0),this.handleClick(this.scope,this.mapCtrl,this.markerCtrl,this.gWin,this.isIconVisibleOnClick,this.initialMarkerVisibility),this.watchShow(b,g,h,this.$compile,this.gWin,this.showWindow,this.hideWindow,this.mapCtrl),this.$log.info(this)}return c(d,b),d.prototype.watchShow=function(a,b,c,d,e,f,g,h){return a.$watch("show",function(i,j){return i!==j?i?f(a,b,c,d,e,h):g(e):i&&!e.getMap()?f(a,b,c,d,e,h):void 0},!0)},d.prototype.handleClick=function(a,b,c,d,e,f){return null!=c?(google.maps.event.addListener(c,"click",function(){return d.setPosition(c.getPosition()),d.open(b),c.setVisible(e)}),google.maps.event.addListener(d,"closeclick",function(){return c.setVisible(f),a.closeClick()})):void 0},d.prototype.showWindow=function(a,b,c,d,e,f){return a.templateUrl?b.get(a.templateUrl,{cache:c}).then(function(b){var c,g;return g=a.$new(),angular.isDefined(a.templateParameter)&&(g.parameter=a.templateParameter),c=d(b.data)(g),e.setContent(c.get(0)),e.open(f)}):e.open(f)},d.prototype.hideWindow=function(a){return a.close()},d.prototype.destroy=function(){return this.hideWindow(this.gWin),this.scope.$destroy(),delete this.gWin,delete this},d}(oo.BaseObject)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api.models.parent",function(){return this.IMarkerParentModel=function(b){function d(b,c,d,e,f){this.linkInit=a(this.linkInit,this),this.watchDestroy=a(this.watchDestroy,this),this.watchIcon=a(this.watchIcon,this),this.watchCoords=a(this.watchCoords,this),this.validateScope=a(this.validateScope,this),this.onTimeOut=a(this.onTimeOut,this);var g,h=this;g=this,this.validateScope(b)||(this.animate=angular.isDefined(d.animate)&&this.isFalse(d.animate),this.doClick=angular.isDefined(d.click),this.mapCtrl=e,this.clsName="IMarker",this.$log=directives.api.utils.Logger,this.$timeout=f,this.$timeout(function(){return h.watchCoords(b),h.watchIcon(b),h.watchDestroy(b),h.onTimeOut(b)}))}return c(d,b),d.prototype.DEFAULTS={animation:google.maps.Animation.DROP},d.prototype.isFalse=function(a){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(a)},d.prototype.onTimeOut=function(){},d.prototype.validateScope=function(a){var b;return b=angular.isUndefined(a.coords)||void 0===a.coords,b&&this.$log.error(this.clsName+": no valid coords attribute found"),b},d.prototype.watchCoords=function(){throw new Exception("Not Implemented!!")},d.prototype.watchIcon=function(){throw new Exception("Not Implemented!!")},d.prototype.watchDestroy=function(){throw new Exception("Not Implemented!!")},d.prototype.linkInit=function(){throw new Exception("Not Implemented!!")},d}(oo.BaseObject)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.module("directives.api.models.parent",function(){return this.IWindowParentModel=function(a){function c(a,b,c,d,e,f,g,h){var i;i=this,this.clsName="directives.api.models.parent.IWindow",this.$log=directives.api.utils.Logger,this.$timeout=e,this.$compile=f,this.$http=g,this.$templateCache=h}return b(c,a),c.include(directives.api.utils.GmapUtil),c.prototype.DEFAULTS={},c}(oo.BaseObject)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api.models.parent",function(){return this.MarkerParentModel=function(b){function d(b,c,e,f,g){this.watchDestroy=a(this.watchDestroy,this),this.watchIcon=a(this.watchIcon,this),this.watchCoords=a(this.watchCoords,this),this.validateScope=a(this.validateScope,this);var h,i;d.__super__.constructor.call(this,b,c,e,f,g),i=this,this.clsName="MarkerParentModel",h=this.createMarkerOptions(f,b.coords,b.icon,this.animate,this.DEFAULTS),this.gMarker=new google.maps.Marker(h),c.data("instance",this.gMarker),this.scope=b,google.maps.event.addListener(this.gMarker,"click",function(){return this.doClick&&null!=b.click?b.click():void 0}),this.$log.info(this)}return c(d,b),d.include(directives.api.utils.GmapUtil),d.prototype.validateScope=function(a){return d.__super__.validateScope.call(this,a)||angular.isUndefined(a.coords.latitude)||angular.isUndefined(a.coords.longitude)},d.prototype.watchCoords=function(a){var b=this;return a.$watch("coords",function(a,c){return a!==c?a&&null!=b.gMarker?(b.gMarker.setMap(b.mapCtrl.getMap()),b.gMarker.setPosition(new google.maps.LatLng(a.latitude,a.longitude)),b.gMarker.setVisible(null!=a.latitude&&null!=a.longitude)):b.gMarker.setMap(null):void 0},!0)},d.prototype.watchIcon=function(a){var b=this;return a.$watch("icon",function(a,c){return a!==c&&null!=b.gMarker?(b.gMarker.icon=a,b.gMarker.setMap(null),b.gMarker.setMap(b.mapCtrl.getMap()),b.gMarker.setPosition(new google.maps.LatLng(coords.latitude,coords.longitude)),b.gMarker.setVisible(coords.latitude&&null!=coords.longitude)):void 0},!0)},d.prototype.watchDestroy=function(a){var b=this;return a.$on("$destroy",function(){return void 0===b.gMarker?(delete b,void 0):(b.gMarker.setMap(null),delete b.gMarker,delete b)})},d}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api.models.parent",function(){return this.MarkersParentModel=function(b){function d(b,c,e,f,g){this.watchDestroy=a(this.watchDestroy,this),this.watchIcon=a(this.watchIcon,this),this.watchCoords=a(this.watchCoords,this),this.watchModels=a(this.watchModels,this),this.createMarkers=a(this.createMarkers,this),this.validateScope=a(this.validateScope,this),this.onTimeOut=a(this.onTimeOut,this);var h;d.__super__.constructor.call(this,b,c,e,f,g),h=this,this.clsName="MarkersParentModel",this.markers=[],this.markersIndex=0,this.scope=b,this.$log.info(this)}return c(d,b),d.prototype.onTimeOut=function(a){return this.watchModels(a),this.createMarkers(a)},d.prototype.validateScope=function(a){var b;return b=angular.isUndefined(a.models)||void 0===a.models,b&&this.$log.error(this.clsName+": no valid models attribute found"),d.__super__.validateScope.call(this,a)||b},d.prototype.createMarkers=function(a){var b,c,d,e,f,g=this;for(f=a.models,c=function(b){return g.markers.push(new directives.api.models.child.MarkerChildModel(g.markersIndex,b,a,g.mapCtrl,g.$timeout,function(a){return delete g.markers[a]},g.DEFAULTS,g.doClick)),g.markersIndex++},d=0,e=f.length;e>d;d++)b=f[d],c(b);return a.markerModels=this.markers},d.prototype.watchModels=function(a){var b=this;return a.$watch("models",function(c,d){var e,f,g,h,i;if(c!==d){for(i=b.markers,f=function(a){return a.destroy()},g=0,h=i.length;h>g;g++)e=i[g],f(e);return delete b.markers,b.markers=[],b.markersIndex=0,b.createMarkers(a)}},!0)},d.prototype.watchCoords=function(a){var b=this;return a.$watch("coords",function(a,c){var d,e,f,g,h;if(a!==c){for(g=b.markers,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.coordsKey=a);return h}},!0)},d.prototype.watchIcon=function(a){var b=this;return a.$watch("icon",function(a,c){var d,e,f,g,h;if(a!==c){for(g=b.markers,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.iconKey=a);return h}},!0)},d.prototype.watchDestroy=function(a){var b=this;return a.$on("$destroy",function(){var a,c,d,e,f;for(e=b.markers,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.destroy());return f})},d}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api.models.parent",function(){return this.WindowsParentModel=function(b){function d(b,c,e,f,g,h,i,j,k){this.interpolateContent=a(this.interpolateContent,this),this.createWindow=a(this.createWindow,this),this.setContentKeys=a(this.setContentKeys,this),this.createChildScopesWindows=a(this.createChildScopesWindows,this),this.watchOurScope=a(this.watchOurScope,this),this.watchDestroy=a(this.watchDestroy,this),this.watchModels=a(this.watchModels,this),this.watch=a(this.watch,this);var l,m,n,o,p,q=this;for(d.__super__.constructor.call(this,b,c,e,f,g,h,i,j,k),m=this,this.$interpolate=k,this.clsName="WindowsParentModel",this.windows=[],this.windwsIndex=0,this.scopePropNames=["show","coords","templateUrl","templateParameter","isIconVisibleOnClick","closeClick"],p=this.scopePropNames,n=0,o=p.length;o>n;n++)l=p[n],this[l+"Key"]=void 0;this.linked=new directives.api.utils.Linked(b,c,e,f),this.models=void 0,this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.$log.info(m),this.$timeout(function(){return q.watchOurScope(b),q.createChildScopesWindows()},50)}return c(d,b),d.prototype.watch=function(a,b,c){var d=this;return a.$watch(b,function(a,e){var f,g,h,i,j;if(a!==e){for(d[c]="function"==typeof a?a():a,i=d.windows,j=[],g=0,h=i.length;h>g;g++)f=i[g],j.push(function(a){return a.scope[b]="self"===d[c]?a:a[d[c]]}(f));return j}},!0)},d.prototype.watchModels=function(a){var b=this;return a.$watch("models",function(a,c){var d,e,f,g,h;if(a!==c){for(h=b.windows,e=function(a){return a.destroy()},f=0,g=h.length;g>f;f++)d=h[f],e(d);return b.windows=[],b.windowsIndex=0,b.createChildScopesWindows()}},!0)},d.prototype.watchDestroy=function(a){var b=this;return a.$on("$destroy",function(){var a,c,d,e;for(e=b.windows,c=0,d=e.length;d>c;c++)a=e[c],a.destroy();return delete b.windows,b.windows=[],b.windowsIndex=0})},d.prototype.watchOurScope=function(a){var b,c,d,e,f,g=this;for(e=this.scopePropNames,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(b){var c;return c=b+"Key",g[c]="function"==typeof a[b]?a[b]():a[b],g.watch(a,b,c)}(b));return f},d.prototype.createChildScopesWindows=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this;if(this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(b=this.linked.scope.isIconVisibleOnClick),a=this.linked.ctrls[0].getMap(),c=this.linked.ctrls.length>1&&null!=this.linked.ctrls[1]?this.linked.ctrls[1].getMarkersScope():void 0,f=angular.isUndefined(this.linked.scope.models)||void 0===scope.models,f&&(void 0===c||void 0===c.markerModels||void 0===c.models))return this.$log.info("No models to create windows from! Need direct models or models derrived from markers!"),void 0;if(null!=a)if(null!=this.linked.scope.models)for(this.models=this.linked.scope.models,this.firstTime&&(this.watchModels(this.linked.scope),this.watchDestroy(this.linked.scope)),this.setContentKeys(this.linked.scope.models),l=this.linked.scope.models,h=0,j=l.length;j>h;h++)e=l[h],this.createWindow(e,void 0,a);else for(this.models=c.models,this.firstTime&&(this.watchModels(c),this.watchDestroy(c)),this.setContentKeys(c.models),m=c.markerModels,g=function(b){return n.createWindow(b.model,b.gMarker,a)},i=0,k=m.length;k>i;i++)d=m[i],g(d);return this.firstTime=!1},d.prototype.setContentKeys=function(a){return a.length>0?this.contentKeys=Object.keys(a[0]):void 0},d.prototype.createWindow=function(a,b,c){var d,e,f,g,h,i,j,k,l=this;for(d=this.linked.scope.$new(!1),k=this.scopePropNames,h=function(b){var c;return c=b+"Key",d[b]="self"===l[c]?a:a[l[c]]},i=0,j=k.length;j>i;i++)e=k[i],h(e);return g=this.interpolateContent(this.linked.element.html(),a),f=this.createWindowOptions(b,d,g,this.DEFAULTS),this.windows.push(new directives.api.models.child.WindowChildModel(d,f,this.isIconVisibleOnClick,c,b,this.$http,this.$templateCache,this.$compile))},d.prototype.interpolateContent=function(a,b){var c,d,e,f,g,h;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(c=this.$interpolate(a),d={},h=this.contentKeys,f=0,g=h.length;g>f;f++)e=h[f],d[e]=b[e];return c(d)}},d}(directives.api.models.parent.IWindowParentModel)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api",function(){return this.IMarker=function(b){function d(b){this.link=a(this.link,this);var c;c=this,this.clsName="IMarker",this.$log=directives.api.utils.Logger,this.$timeout=b,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope={coords:"=coords",icon:"=icon",click:"&click"}}return c(d,b),d.prototype.controller=function(){throw new Exception("Not Implemented!!")},d.prototype.link=function(){throw new Exception("Not implemented!!")},d}(oo.BaseObject)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api",function(){return this.IWindow=function(b){function d(b,c,d,e){this.link=a(this.link,this);var f;f=this,this.clsName="IWindow",this.restrict="ECMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require=void 0,this.scope={coords:"=coords",show:"=show",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick"},this.$log=directives.api.utils.Logger,this.$timeout=b,this.$compile=c,this.$http=d,this.$templateCache=e}return c(d,b),d.prototype.link=function(){throw new Exception("Not Implemented!!")},d}(oo.BaseObject)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api",function(){return this.Marker=function(b){function d(b){this.link=a(this.link,this);var c;d.__super__.constructor.call(this,b),c=this,this.template='<span class="angular-google-map-marker" ng-transclude></span>',this.clsName="Marker",this.$log.info(this)}return c(d,b),d.prototype.controller=function(a,b){return this.getMarker=function(){return b.data("instance")}},d.prototype.link=function(a,b,c,d){return new directives.api.models.parent.MarkerParentModel(a,b,c,d,this.$timeout)},d}(directives.api.IMarker)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api",function(){return this.Markers=function(b){function d(b){this.link=a(this.link,this);var c;d.__super__.constructor.call(this,b),c=this,this.template='<span class="angular-google-map-markers" ng-transclude></span>',this.clsName="Markers",this.scope.models="=models",this.$timeout=b,this.$log.info(this)}return c(d,b),d.prototype.controller=function(a){return this.getMarkersScope=function(){return a}},d.prototype.link=function(a,b,c,d){return new directives.api.models.parent.MarkersParentModel(a,b,c,d,this.$timeout)},d}(directives.api.IMarker)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api",function(){return this.Window=function(b){function d(b,c,e,f){this.link=a(this.link,this);var g;d.__super__.constructor.call(this,b,c,e,f),g=this,this.clsName="Window",this.require=["^googleMap","^?marker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',this.$log.info(g)}return c(d,b),d.include(directives.api.utils.GmapUtil),d.prototype.link=function(a,b,c,d){var e=this;return this.$timeout(function(){var f,g,h,i;return f=!0,angular.isDefined(c.isiconvisibleonclick)&&(f=a.isIconVisibleOnClick),g=d[0].getMap(),h=d.length>1&&null!=d[1]?d[1].getMarker():void 0,i=e.createWindowOptions(h,a,b.html(),e.DEFAULTS),null!=g?new directives.api.models.child.WindowChildModel(a,i,f,g,h,e.$http,e.$templateCache,e.$compile):void 0},50)},d}(directives.api.IWindow)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.module("directives.api",function(){return this.Windows=function(b){function d(b,c,e,f,g){this.link=a(this.link,this);var h;d.__super__.constructor.call(this,b,c,e,f),h=this,this.$interpolate=g,this.clsName="Windows",this.require=["^googleMap","^?markers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',this.scope.models="=models",this.$log.info(h)}return c(d,b),d.prototype.link=function(a,b,c,d){return new directives.api.models.parent.WindowsParentModel(a,b,c,d,this.$timeout,this.$compile,this.$http,this.$templateCache,this.$interpolate)},d}(directives.api.IWindow)})}.call(this),angular.module("google-maps").directive("googleMap",["$log","$timeout",function(a,b){"use strict";function c(a){return angular.isDefined(a)&&null!==a&&a===!0||"1"===a||"y"===a||"true"===a}directives.api.utils.Logger.logger=a;var d={mapTypeId:google.maps.MapTypeId.ROADMAP};return{restrict:"ECMA",transclude:!0,replace:!1,template:'<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',scope:{center:"=center",zoom:"=zoom",dragging:"=dragging",markers:"=markers",refresh:"&refresh",windows:"=windows",events:"=events"},controller:["$scope",function(a){this.getMap=function(){return a.map}}],link:function(e,f,g){if(!angular.isDefined(e.center)||!angular.isDefined(e.center.latitude)||!angular.isDefined(e.center.longitude))return a.error("angular-google-maps: could not find a valid center property"),void 0;if(!angular.isDefined(e.zoom))return a.error("angular-google-maps: map zoom property not set"),void 0;var h=angular.element(f);h.addClass("angular-google-map");var i={options:{}};if(g.options&&(i.options=angular.fromJson(g.options)),g.type){var j=g.type.toUpperCase();google.maps.MapTypeId.hasOwnProperty(j)?i.mapTypeId=google.maps.MapTypeId[g.type.toUpperCase()]:a.error('angular-google-maps: invalid map type "'+g.type+'"')}var k=new google.maps.Map(h.find("div")[1],angular.extend({},d,i,{center:new google.maps.LatLng(e.center.latitude,e.center.longitude),draggable:c(g.draggable),zoom:e.zoom})),l=!1;google.maps.event.addListener(k,"dragstart",function(){l=!0,b(function(){e.$apply(function(a){a.dragging=l})})}),google.maps.event.addListener(k,"dragend",function(){l=!1,b(function(){e.$apply(function(a){a.dragging=l})})}),google.maps.event.addListener(k,"drag",function(){var a=k.center;b(function(){e.$apply(function(b){b.center.latitude=a.lat(),b.center.longitude=a.lng()})})}),google.maps.event.addListener(k,"zoom_changed",function(){e.zoom!=k.zoom&&b(function(){e.$apply(function(a){a.zoom=k.zoom})})});var m=!1;if(google.maps.event.addListener(k,"center_changed",function(){var a=k.center;m||b(function(){e.$apply(function(b){k.dragging||(b.center.latitude!==a.lat()&&(b.center.latitude=a.lat()),b.center.longitude!==a.lng()&&(b.center.longitude=a.lng()))})})}),angular.isDefined(e.events)&&null!==e.events&&angular.isObject(e.events)){var n=function(a){return function(){e.events[a].apply(e,[k,a,arguments])}};for(var o in e.events)e.events.hasOwnProperty(o)&&angular.isFunction(e.events[o])&&google.maps.event.addListener(k,o,n(o))}e.map=k,google.maps.event.trigger(k,"resize"),angular.isUndefined(e.refresh())||e.$watch("refresh()",function(a,b){if(a&&!b){var d=new google.maps.LatLng(a.latitude,a.longitude);c(g.pan)?k.panTo(d):k.setCenter(d)}}),e.$watch("center",function(a,b){if(a!==b){if(m=!0,!l){var d=new google.maps.LatLng(a.latitude,a.longitude);c(g.pan)?k.panTo(d):k.setCenter(d)}m=!1}},!0),e.$watch("zoom",function(a,b){a!==b&&k.setZoom(a)})}}}]),angular.module("google-maps").directive("marker",["$timeout",function(a){return new directives.api.Marker(a)}]),angular.module("google-maps").directive("markers",["$timeout",function(a){return new directives.api.Markers(a)}]),angular.module("google-maps").directive("polyline",["$log","$timeout",function(a,b){"use strict";function c(a){for(var b=0;b<a.length;b++)if(angular.isUndefined(a[b].latitude)||angular.isUndefined(a[b].longitude))return!1;return!0}function d(a){for(var b=[],c=0;c<a.length;c++)b.push(new google.maps.LatLng(a[c].latitude,a[c].longitude));return b}function e(a,b){for(var c=new google.maps.LatLngBounds,d=0;d<b.length;d++)c.extend(b[d]);a.fitBounds(c)}function f(a){return angular.isDefined(a)&&null!==a&&a===!0||"1"===a||"y"===a||"true"===a}var g={};return{restrict:"ECA",require:"^googleMap",scope:{path:"=path",stroke:"=stroke"},link:function(h,i,j,k){return angular.isUndefined(h.path)||null===h.path||h.path.length<2||!c(h.path)?(a.error("polyline: no valid path attribute found"),void 0):(b(function(){var a=k.getMap(),b=d(h.path),c=angular.extend({},g,{map:a,path:b,strokeColor:h.stroke&&h.stroke.color,strokeOpacity:h.stroke&&h.stroke.opacity,strokeWeight:h.stroke&&h.stroke.weight}),i=new google.maps.Polyline(c);f(j.fit)&&e(a,b),h.$watch("path",function(b,c){if(b!==c)if(b){var g=d(b);i.setMap(a),i.setPath(g),f(j.fit)&&e(a,g)}else i.setMap(null)},!0),h.$on("$destroy",function(){i.setMap(null)})}),void 0)}}}]),angular.module("google-maps").directive("window",["$timeout","$compile","$http","$templateCache",function(a,b,c,d){return new directives.api.Window(a,b,c,d)}]),angular.module("google-maps").directive("windows",["$timeout","$compile","$http","$templateCache","$interpolate",function(a,b,c,d,e){return new directives.api.Windows(a,b,c,d,e)}]);